"use strict";(self["webpackChunkforum_front_end_vue"]=self["webpackChunkforum_front_end_vue"]||[]).push([[742],{52742:function(t,e,r){r.r(e),r.d(e,{default:function(){return J}});var s=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"album py-5"},[r("div",{staticClass:"container"},[t.isLoading?r("Spinner"):[r("UserProfileCard",{attrs:{profile:t.user.profile}}),r("div",{staticClass:"row"},[r("div",{staticClass:"col-md-4"},[r("UserFollowingsCard",{attrs:{followings:t.user.followings}}),r("br"),r("UserFollowersCard",{attrs:{followers:t.user.followers}})],1),r("div",{staticClass:"col-md-8"},[r("UserCommentsCard",{attrs:{comments:t.user.comments}}),r("br"),r("UserFavoritedRestaurantsCard",{attrs:{"favorited-restaurants":t.user.favoritedRestaurants}})],1)])]],2)])},a=[],i=r(16198),o=(r(78975),r(68309),r(57327),r(41539),function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"card mb-3"},[r("div",{staticClass:"row g-3"},[r("div",{staticClass:"col-4 col-sm-6 col-md-4 col-lg-3 my-sm-auto"},[r("img",{staticClass:"w-100 m-3 rounded",attrs:{src:t._f("emptyAvatarFilter")(t.profile.image,t.profile.id)}})]),r("div",{staticClass:"col-8 col-sm-6 col-md-8 col-lg-9"},[r("div",{staticClass:"card-body"},[r("h4",{staticClass:"card-title"},[t._v(t._s(t.profile.name))]),r("p",{staticClass:"card-text"},[t._v(t._s(t.profile.email))]),r("ul",{staticClass:"list-unstyled list-inline"},[r("li",[r("strong",[t._v(t._s(t.profile.commentsLength))]),t._v(" 已評論餐廳 ")]),r("li",[r("strong",[t._v(t._s(t.profile.favoritedCounts))]),t._v(" 收藏的餐廳 ")]),r("li",[r("strong",[t._v(t._s(t.profile.followingsCounts))]),t._v(" followings (追蹤者) ")]),r("li",[r("strong",[t._v(t._s(t.profile.followersCounts))]),t._v(" followers (追隨者) ")])]),t.profile.id===t.currentUser.id?r("p",{staticClass:"m-0"},[r("router-link",{attrs:{to:{name:"user-edit",params:{id:t.profile.id}}}},[r("button",{staticClass:"btn btn-primary",attrs:{type:"submit"}},[t._v(" edit ")])])],1):t._e()])])])])}),l=[],n=r(93019),c=r(98247),d={mixins:[c.XR],props:{profile:{type:Object,required:!0}},computed:{currentUser:function(){return(0,n.Z)({},this.$store.state.currentUser)}}},u=d,f=r(1001),m=(0,f.Z)(u,o,l,!1,null,"3c557630",null),p=m.exports,v=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"card"},[r("div",{staticClass:"card-header"},[r("strong",[t._v(t._s(t.followings.length))]),t._v(" followings (追蹤者) ")]),r("div",{staticClass:"card-body"},t._l(t.followings,(function(e){return r("router-link",{key:e.id,attrs:{to:{name:"user",params:{id:e.id}},"data-username":e.name}},[r("img",{staticClass:"avatar w-100",attrs:{src:t._f("emptyAvatarFilter")(e.image,e.id)}})])})),1)])},g=[],_={mixins:[c.XR],props:{followings:{type:Array,required:!0}}},C=_,h=(0,f.Z)(C,v,g,!1,null,"000021d3",null),w=h.exports,y=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"card"},[r("div",{staticClass:"card-header"},[r("strong",[t._v(t._s(t.followers.length))]),t._v(" followers (追隨者) ")]),r("div",{staticClass:"card-body"},t._l(t.followers,(function(e){return r("router-link",{key:e.id,attrs:{to:{name:"user",params:{id:e.id}},"data-username":e.name}},[r("img",{staticClass:"avatar w-100",attrs:{src:t._f("emptyAvatarFilter")(e.image,e.id)}})])})),1)])},b=[],R={mixins:[c.XR],props:{followers:{type:Array,required:!0}}},F=R,k=(0,f.Z)(F,y,b,!1,null,"5ef13d67",null),x=k.exports,U=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"card"},[r("div",{staticClass:"card-header"},[r("strong",[t._v(t._s(t.comments.length))]),t._v(" 已評論餐廳 ")]),r("div",{staticClass:"card-body"},t._l(t.comments,(function(e){return r("router-link",{key:e.id,attrs:{to:{name:"restaurant",params:{id:e.Restaurant.id}},"data-name":e.Restaurant.name}},[r("img",{staticClass:"avatar w-100",attrs:{src:t._f("emptyImageFilter")(e.Restaurant.image)}})])})),1)])},Z=[],L={mixins:[c.Lf],props:{comments:{type:Array,required:!0}}},$=L,A=(0,f.Z)($,U,Z,!1,null,"6b1cb869",null),E=A.exports,q=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"card"},[r("div",{staticClass:"card-header"},[r("strong",[t._v(t._s(t.favoritedRestaurants.length))]),t._v(" 收藏的餐廳 ")]),r("div",{staticClass:"card-body"},t._l(t.favoritedRestaurants,(function(e){return r("router-link",{key:e.id,attrs:{to:{name:"restaurant",params:{id:e.id}},"data-name":e.name}},[r("img",{staticClass:"avatar w-100",attrs:{src:t._f("emptyImageFilter")(e.image)}})])})),1)])},P=[],I={mixins:[c.Lf],props:{favoritedRestaurants:{type:Array,required:!0}}},X=I,S=(0,f.Z)(X,q,P,!1,null,"73442218",null),j=S.exports,O=r(76017),z=r(22907),B=r(41926),D={components:{UserProfileCard:p,UserFollowingsCard:w,UserFollowersCard:x,UserCommentsCard:E,UserFavoritedRestaurantsCard:j,Spinner:z.Z},data:function(){return{user:{profile:{},followings:[],followers:[],comments:[],favoritedRestaurants:[]},isLoading:!0}},methods:{fetchProfile:function(){var t=(0,i.Z)(regeneratorRuntime.mark((function t(e){var r,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,this.isLoading=!0,t.next=4,O.Z.get({userId:e});case 4:r=t.sent,s=r.data,this.user.profile={id:s.profile.id,name:s.profile.name,email:s.profile.email,image:s.profile.image,commentsLength:s.profile.Comments.length,favoritedCounts:s.profile.FavoritedRestaurants.length,followingsCounts:s.profile.Followings.length,followersCounts:s.profile.Followers.length},this.user.followings=s.profile.Followings,this.user.followers=s.profile.Followers,this.user.comments=s.profile.Comments.filter((function(t){return t.RestaurantId})),this.user.favoritedRestaurants=s.profile.FavoritedRestaurants,this.isLoading=!1,t.next=19;break;case 14:t.prev=14,t.t0=t["catch"](0),this.isLoading=!1,console.log("error: ",t.t0),B.F.fire({icon:"error",title:"無法取得使用者資料，請稍後再試"});case 19:case"end":return t.stop()}}),t,this,[[0,14]])})));function e(e){return t.apply(this,arguments)}return e}()},created:function(){this.fetchProfile(this.$route.params.id)},beforeRouteUpdate:function(t,e,r){this.fetchProfile(t.params.id),r()}},G=D,H=(0,f.Z)(G,s,a,!1,null,null,null),J=H.exports}}]);
//# sourceMappingURL=742-legacy.aa2a0fb3.js.map