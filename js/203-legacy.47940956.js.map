{"version":3,"file":"js/203-legacy.47940956.js","mappings":"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","sources":["webpack://forum-front-end-vue/./src/views/RestaurantsTop.vue?8cf8","webpack://forum-front-end-vue/src/views/RestaurantsTop.vue","webpack://forum-front-end-vue/./src/views/RestaurantsTop.vue?996d","webpack://forum-front-end-vue/./src/views/RestaurantsTop.vue"],"sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"container py-5\"},[_c('NavTabs'),_c('h1',{staticClass:\"mt-5\"},[_vm._v(\"人氣餐廳\")]),_c('hr'),(_vm.isLoading)?_c('Spinner'):_c('div',{staticClass:\"card-wrapper\"},_vm._l((_vm.restaurants),function(restaurant){return _c('div',{key:restaurant.id,staticClass:\"card\"},[_c('div',{staticClass:\"row gy-1 align-items-center\"},[_c('div',{staticClass:\"col-sm-4 col-lg-3 col-xl-4\"},[_c('router-link',{attrs:{\"to\":{ name: 'restaurant', params: { id: restaurant.id } }}},[_c('img',{staticClass:\"card-img\",attrs:{\"src\":_vm._f(\"emptyImageFilter\")(restaurant.image)}})])],1),_c('div',{staticClass:\"col-sm-8 col-lg-9 col-xl-8\"},[_c('div',{staticClass:\"card-body\"},[_c('h5',{staticClass:\"card-title\"},[_vm._v(_vm._s(restaurant.name))]),_c('span',{staticClass:\"badge badge-secondary\"},[_vm._v(\"收藏數：\"+_vm._s(restaurant.FavoriteCount))]),_c('p',{staticClass:\"card-text text-truncate\"},[_vm._v(\" \"+_vm._s(restaurant.description)+\" \")]),_c('router-link',{staticClass:\"btn btn-primary mr-2\",attrs:{\"to\":{\n\t\t\t\t\t\t\t\tname: 'restaurant-dashboard',\n\t\t\t\t\t\t\t\tparams: { id: restaurant.id },\n\t\t\t\t\t\t\t}}},[_vm._v(\"Dashboard \")]),(restaurant.isFavorited)?_c('button',{staticClass:\"btn btn-danger mr-2\",attrs:{\"type\":\"button\",\"disabled\":restaurant.isProcessing},on:{\"click\":function($event){$event.stopPropagation();$event.preventDefault();return _vm.deleteFavorite(restaurant)}}},[_vm._v(\" 移除最愛 \")]):_c('button',{staticClass:\"btn btn-primary\",attrs:{\"type\":\"button\",\"disabled\":restaurant.isProcessing},on:{\"click\":function($event){$event.stopPropagation();$event.preventDefault();return _vm.addFavorite(restaurant)}}},[_vm._v(\" 加到最愛 \")])],1)])])])}),0)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n\t<div class=\"container py-5\">\r\n\t\t<NavTabs />\r\n\t\t<h1 class=\"mt-5\">人氣餐廳</h1>\r\n\r\n\t\t<hr />\r\n\t\t<!-- Top Restaurant Cards -->\r\n\t\t<Spinner v-if=\"isLoading\" />\r\n\t\t<div class=\"card-wrapper\" v-else>\r\n\t\t\t<div class=\"card\" v-for=\"restaurant in restaurants\" :key=\"restaurant.id\">\r\n\t\t\t\t<div class=\"row gy-1 align-items-center\">\r\n\t\t\t\t\t<div class=\"col-sm-4 col-lg-3 col-xl-4\">\r\n\t\t\t\t\t\t<router-link\r\n\t\t\t\t\t\t\t:to=\"{ name: 'restaurant', params: { id: restaurant.id } }\"\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<img\r\n\t\t\t\t\t\t\t\tclass=\"card-img\"\r\n\t\t\t\t\t\t\t\t:src=\"restaurant.image | emptyImageFilter\"\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</router-link>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div class=\"col-sm-8 col-lg-9 col-xl-8\">\r\n\t\t\t\t\t\t<div class=\"card-body\">\r\n\t\t\t\t\t\t\t<h5 class=\"card-title\">{{ restaurant.name }}</h5>\r\n\t\t\t\t\t\t\t<span class=\"badge badge-secondary\"\r\n\t\t\t\t\t\t\t\t>收藏數：{{ restaurant.FavoriteCount }}</span\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<p class=\"card-text text-truncate\">\r\n\t\t\t\t\t\t\t\t{{ restaurant.description }}\r\n\t\t\t\t\t\t\t</p>\r\n\t\t\t\t\t\t\t<router-link\r\n\t\t\t\t\t\t\t\tclass=\"btn btn-primary mr-2\"\r\n\t\t\t\t\t\t\t\t:to=\"{\r\n\t\t\t\t\t\t\t\t\tname: 'restaurant-dashboard',\r\n\t\t\t\t\t\t\t\t\tparams: { id: restaurant.id },\r\n\t\t\t\t\t\t\t\t}\"\r\n\t\t\t\t\t\t\t\t>Dashboard\r\n\t\t\t\t\t\t\t</router-link>\r\n\r\n\t\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\t\ttype=\"button\"\r\n\t\t\t\t\t\t\t\tclass=\"btn btn-danger mr-2\"\r\n\t\t\t\t\t\t\t\t:disabled=\"restaurant.isProcessing\"\r\n\t\t\t\t\t\t\t\tv-if=\"restaurant.isFavorited\"\r\n\t\t\t\t\t\t\t\t@click.stop.prevent=\"deleteFavorite(restaurant)\"\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t移除最愛\r\n\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\t\ttype=\"button\"\r\n\t\t\t\t\t\t\t\tclass=\"btn btn-primary\"\r\n\t\t\t\t\t\t\t\t:disabled=\"restaurant.isProcessing\"\r\n\t\t\t\t\t\t\t\tv-else\r\n\t\t\t\t\t\t\t\t@click.stop.prevent=\"addFavorite(restaurant)\"\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t加到最愛\r\n\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t</div>\r\n</template>\r\n<script>\r\nimport NavTabs from '../components/NavTabs.vue'\r\nimport { emptyImageFilter } from './../utils/mixins'\r\nimport { Toast } from '@/utils/helpers'\r\nimport restaurantsAPI from '@/apis/restaurants'\r\nimport usersAPI from '@/apis/users'\r\nimport Spinner from '@/components/Spinner.vue'\r\n\r\nexport default {\r\n\tmixins: [emptyImageFilter],\r\n\tcomponents: {\r\n\t\tNavTabs,\r\n\t\tSpinner,\r\n\t},\r\n\tdata() {\r\n\t\treturn {\r\n\t\t\trestaurants: [],\r\n\t\t\tisLoading: true,\r\n\t\t}\r\n\t},\r\n\tmethods: {\r\n\t\tfetchRestaurants: async function () {\r\n\t\t\ttry {\r\n\t\t\t\tthis.isLoading = true\r\n\t\t\t\t// 1. Call api\r\n\t\t\t\tconst { data } = await restaurantsAPI.getTopRestaurants()\r\n\t\t\t\t// 2. Save response data to vue\r\n\t\t\t\tthis.restaurants = data.restaurants.map((restaurant) => ({\r\n\t\t\t\t\tid: restaurant.id,\r\n\t\t\t\t\tname: restaurant.name,\r\n\t\t\t\t\timage: restaurant.image,\r\n\t\t\t\t\tFavoriteCount: restaurant.FavoriteCount,\r\n\t\t\t\t\tdescription: restaurant.description,\r\n\t\t\t\t\tisFavorited: restaurant.isFavorited,\r\n\t\t\t\t\tisProcessing: false, // duplicate request handling\r\n\t\t\t\t}))\r\n\t\t\t\tthis.isLoading = false\r\n\t\t\t} catch (error) {\r\n\t\t\t\tthis.isLoading = false\r\n\t\t\t\tconsole.log('error: ', error)\r\n\t\t\t\tToast.fire({\r\n\t\t\t\t\ticon: 'error',\r\n\t\t\t\t\ttitle: '無法取得人氣餐廳，請稍後再試',\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t},\r\n\t\taddFavorite: async function (restaurant) {\r\n\t\t\ttry {\r\n\t\t\t\trestaurant.isProcessing = true\r\n\t\t\t\t// 1. Call add-favorite api\r\n\t\t\t\tconst { data } = await usersAPI.addFavorite(restaurant.id)\r\n\t\t\t\t// 2. Throw error if backend add-favorite fail\r\n\t\t\t\tif (data.status !== 'success') {\r\n\t\t\t\t\tthrow new Error(data.message)\r\n\t\t\t\t}\r\n\t\t\t\t// 3. Update client-side data\r\n\t\t\t\t// * 'restaurant' is called by reference\r\n\t\t\t\t// * so no need to iterate through 'restaurants' array to find data\r\n\t\t\t\trestaurant.isFavorited = true\r\n\t\t\t\trestaurant.FavoriteCount++\r\n\t\t\t\trestaurant.isProcessing = false\r\n\t\t\t} catch (error) {\r\n\t\t\t\trestaurant.isProcessing = false\r\n\t\t\t\tconsole.log('error: ', error)\r\n\t\t\t\tToast.fire({\r\n\t\t\t\t\ticon: 'error',\r\n\t\t\t\t\ttitle: '無法將餐廳加入最愛，請稍後再試',\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t},\r\n\t\tdeleteFavorite: async function (restaurant) {\r\n\t\t\ttry {\r\n\t\t\t\t// 1. Call delete-favorite api\r\n\t\t\t\tconst { data } = await usersAPI.deleteFavorite(restaurant.id)\r\n\t\t\t\t// 2. Throw error if backend delete-favorite fail\r\n\t\t\t\tif (data.status !== 'success') {\r\n\t\t\t\t\tthrow new Error(data.message)\r\n\t\t\t\t}\r\n\t\t\t\t// 3. Update client-side data\r\n\t\t\t\t// * 'restaurant' is called by reference\r\n\t\t\t\t// * so no need to iterate through 'restaurants' array to find data\r\n\t\t\t\trestaurant.isFavorited = false\r\n\t\t\t\trestaurant.FavoriteCount--\r\n\t\t\t} catch (error) {\r\n\t\t\t\tconsole.log('error: ', error)\r\n\t\t\t\tToast.fire({\r\n\t\t\t\t\ticon: 'error',\r\n\t\t\t\t\ttitle: '無法將餐廳移除最愛，請稍後再試',\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t},\r\n\t},\r\n\tcreated() {\r\n\t\tthis.fetchRestaurants()\r\n\t},\r\n}\r\n</script>\r\n<style scoped>\r\n.card-wrapper {\r\n\tdisplay: flex;\r\n\tflex-direction: column;\r\n\tgap: 16px;\r\n}\r\n.col-sm-4 {\r\n\tpadding: 18px;\r\n\tmargin-inline: 18px;\r\n}\r\n.card-img {\r\n\tobject-fit: cover;\r\n}\r\n@media (min-width: 480px) {\r\n\t.col-sm-4 {\r\n\t\tflex: 0 0 33.333333%;\r\n\t\tmax-width: 33.333333%;\r\n\t\tpadding: 0;\r\n\t\tmargin-inline: 0;\r\n\t}\r\n\t.col-sm-8 {\r\n\t\tflex: 0 0 66.666667%;\r\n\t\tmax-width: 66.666667%;\r\n\t}\r\n\t.card-wrapper {\r\n\t\tdisplay: grid;\r\n\t\tgrid-template-columns: repeat(auto-fit, minmax(480px, 1fr));\r\n\t\tgap: 16px;\r\n\t}\r\n\t.card .col-xl-4 {\r\n\t\talign-self: stretch;\r\n\t\tpadding: 18px;\r\n\t}\r\n\t.card-img {\r\n\t\twidth: 100%;\r\n\t\theight: 100%;\r\n\t\tmargin-left: 18px;\r\n\t}\r\n}\r\n@media (min-width: 768px) {\r\n\t.col-lg-3 {\r\n\t\tflex: 0 0 25%;\r\n\t\tmax-width: 25%;\r\n\t}\r\n\t.col-lg-9 {\r\n\t\tflex: 0 0 75%;\r\n\t\tmax-width: 75%;\r\n\t}\r\n\t.card-img {\r\n\t\taspect-ratio: auto;\r\n\t\tmargin-left: 18px;\r\n\t}\r\n}\r\n@media (min-width: 1200px) {\r\n\t.row {\r\n\t\tgap: 0;\r\n\t}\r\n\t.card .col-xl-4 {\r\n\t\talign-self: stretch;\r\n\t\tpadding: 18px;\r\n\t}\r\n\t.card-img {\r\n\t\twidth: 100%;\r\n\t\theight: 100%;\r\n\t\tmargin-left: 18px;\r\n\t}\r\n}\r\n</style>\r\n","import mod from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40[0].rules[0].use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./RestaurantsTop.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40[0].rules[0].use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./RestaurantsTop.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./RestaurantsTop.vue?vue&type=template&id=5df1d1b7&scoped=true&\"\nimport script from \"./RestaurantsTop.vue?vue&type=script&lang=js&\"\nexport * from \"./RestaurantsTop.vue?vue&type=script&lang=js&\"\nimport style0 from \"./RestaurantsTop.vue?vue&type=style&index=0&id=5df1d1b7&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"5df1d1b7\",\n  null\n  \n)\n\nexport default component.exports"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","_v","_l","restaurant","key","id","attrs","name","params","_f","image","_s","FavoriteCount","description","isProcessing","on","$event","stopPropagation","preventDefault","deleteFavorite","addFavorite","staticRenderFns","mixins","components","NavTabs","Spinner","data","restaurants","isLoading","methods","fetchRestaurants","restaurantsAPI","isFavorited","console","Toast","icon","title","usersAPI","created","component"],"sourceRoot":""}