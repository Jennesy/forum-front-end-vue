"use strict";(self["webpackChunkforum_front_end_vue"]=self["webpackChunkforum_front_end_vue"]||[]).push([[82],{3082:function(s,e,t){t.r(e),t.d(e,{default:function(){return _}});var r=function(){var s=this,e=s.$createElement,t=s._self._c||e;return t("div",{staticClass:"container py-5"},[t("NavTabs"),t("h1",{staticClass:"mt-5"},[s._v("美食達人")]),t("hr"),s.isLoading?t("Spinner"):t("div",{staticClass:"card-wrapper text-center"},s._l(s.users,(function(s){return t("UserCard",{key:s.id,attrs:{"initial-user":s}})})),1)],1)},i=[],n=t(2522),o=function(){var s=this,e=s.$createElement,t=s._self._c||e;return t("div",{staticClass:"d-flex flex-row flex-sm-column align-items-center bg-light p-3 rounded"},[t("router-link",{attrs:{to:{name:"user",params:{id:s.user.id}}}},[t("img",{staticClass:"rounded",attrs:{src:s._f("emptyAvatarFilter")(s.user.image,s.user.id),width:"140px",height:"140px"}})]),t("div",[t("h2",[s._v(s._s(s.user.name))]),t("span",{staticClass:"badge badge-secondary"},[s._v("追蹤人數："+s._s(s.user.FollowerCount))])]),t("p",{staticClass:"mt-3"},[s.user.isFollowed?t("button",{staticClass:"btn btn-danger",attrs:{type:"button",disabled:s.user.isProcessing},on:{click:function(e){return e.stopPropagation(),e.preventDefault(),s.deleteFollowing(s.user.id)}}},[s._v(" 取消追蹤 ")]):t("button",{staticClass:"btn btn-primary",attrs:{type:"button",disabled:s.user.isProcessing},on:{click:function(e){return e.stopPropagation(),e.preventDefault(),s.addFollowing(s.user.id)}}},[s._v(" 追蹤 ")])])],1)},a=[],l=(t(1703),t(8247)),u=t(1926),c=t(6017),d={mixins:[l.XR],props:{initialUser:{type:Object,required:!0}},data(){return{user:{...this.initialUser,isProcessing:!1}}},methods:{addFollowing:async function(s){try{this.user.isProcessing=!0;const{data:e}=await c.Z.addFollowing(s);if("success"!==e.status)throw new Error(e.message);this.user.isFollowed=!0,this.user.FollowerCount++,this.user.isProcessing=!1}catch(e){this.user.isProcessing=!1,console.log("error: ",e),u.F.fire({icon:"error",title:"無法加入追蹤，請稍後再試"})}},deleteFollowing:async function(s){try{this.user.isProcessing=!0;const{data:e}=await c.Z.deleteFollowing(s);if("success"!==e.status)throw new Error(e.message);this.user.isFollowed=!1,this.user.FollowerCount--,this.user.isProcessing=!1}catch(e){this.user.isProcessing=!1,console.log("error: ",e),u.F.fire({icon:"error",title:"無法取消追蹤，請稍後再試"})}}}},g=d,h=t(1001),f=(0,h.Z)(g,o,a,!1,null,"5af00e8f",null),p=f.exports,m=t(2907),w={name:"UsersTop",components:{NavTabs:n.Z,UserCard:p,Spinner:m.Z},data(){return{users:[],isLoading:!0}},methods:{fetchUsers:async function(){try{this.isLoading=!0;const{data:s}=await c.Z.getTopUsers();this.users=s.users.map((s=>({id:s.id,name:s.name,image:s.image,FollowerCount:s.FollowerCount,isFollowed:s.isFollowed}))),this.isLoading=!1}catch(s){this.isLoading=!1,console.log("error: ",s),u.F.fire({icon:"error",title:"無法取得美食達人，請稍後再試"})}}},created(){this.fetchUsers()}},F=w,v=(0,h.Z)(F,r,i,!1,null,"20ac3ad8",null),_=v.exports}}]);
//# sourceMappingURL=82.5b503fed.js.map