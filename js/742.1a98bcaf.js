"use strict";(self["webpackChunkforum_front_end_vue"]=self["webpackChunkforum_front_end_vue"]||[]).push([[742],{2742:function(t,s,r){r.r(s),r.d(s,{default:function(){return G}});var e=function(){var t=this,s=t.$createElement,r=t._self._c||s;return r("div",{staticClass:"album py-5"},[r("div",{staticClass:"container"},[t.isLoading?r("Spinner"):[r("UserProfileCard",{attrs:{profile:t.user.profile}}),r("div",{staticClass:"row"},[r("div",{staticClass:"col-md-4"},[r("UserFollowingsCard",{attrs:{followings:t.user.followings}}),r("br"),r("UserFollowersCard",{attrs:{followers:t.user.followers}})],1),r("div",{staticClass:"col-md-8"},[r("UserCommentsCard",{attrs:{comments:t.user.comments}}),r("br"),r("UserFavoritedRestaurantsCard",{attrs:{"favorited-restaurants":t.user.favoritedRestaurants}})],1)])]],2)])},a=[],i=function(){var t=this,s=t.$createElement,r=t._self._c||s;return r("div",{staticClass:"card mb-3"},[r("div",{staticClass:"row g-3"},[r("div",{staticClass:"col-4 col-sm-6 col-md-4 col-lg-3 my-sm-auto"},[r("img",{staticClass:"w-100 m-3 rounded",attrs:{src:t._f("emptyAvatarFilter")(t.profile.image,t.profile.id)}})]),r("div",{staticClass:"col-8 col-sm-6 col-md-8 col-lg-9"},[r("div",{staticClass:"card-body"},[r("h4",{staticClass:"card-title"},[t._v(t._s(t.profile.name))]),r("p",{staticClass:"card-text"},[t._v(t._s(t.profile.email))]),r("ul",{staticClass:"list-unstyled list-inline"},[r("li",[r("strong",[t._v(t._s(t.profile.commentsLength))]),t._v(" 已評論餐廳 ")]),r("li",[r("strong",[t._v(t._s(t.profile.favoritedCounts))]),t._v(" 收藏的餐廳 ")]),r("li",[r("strong",[t._v(t._s(t.profile.followingsCounts))]),t._v(" followings (追蹤者) ")]),r("li",[r("strong",[t._v(t._s(t.profile.followersCounts))]),t._v(" followers (追隨者) ")])]),t.profile.id===t.currentUser.id?r("p",{staticClass:"m-0"},[r("router-link",{attrs:{to:{name:"user-edit",params:{id:t.profile.id}}}},[r("button",{staticClass:"btn btn-primary",attrs:{type:"submit"}},[t._v(" edit ")])])],1):t._e()])])])])},l=[],o=r(8247),n={mixins:[o.XR],props:{profile:{type:Object,required:!0}},computed:{currentUser(){return{...this.$store.state.currentUser}}}},d=n,c=r(1001),u=(0,c.Z)(d,i,l,!1,null,"3c557630",null),f=u.exports,m=function(){var t=this,s=t.$createElement,r=t._self._c||s;return r("div",{staticClass:"card"},[r("div",{staticClass:"card-header"},[r("strong",[t._v(t._s(t.followings.length))]),t._v(" followings (追蹤者) ")]),r("div",{staticClass:"card-body"},t._l(t.followings,(function(s){return r("router-link",{key:s.id,attrs:{to:{name:"user",params:{id:s.id}},"data-username":s.name}},[r("img",{staticClass:"avatar w-100",attrs:{src:t._f("emptyAvatarFilter")(s.image,s.id)}})])})),1)])},p=[],v={mixins:[o.XR],props:{followings:{type:Array,required:!0}}},g=v,_=(0,c.Z)(g,m,p,!1,null,"000021d3",null),C=_.exports,h=function(){var t=this,s=t.$createElement,r=t._self._c||s;return r("div",{staticClass:"card"},[r("div",{staticClass:"card-header"},[r("strong",[t._v(t._s(t.followers.length))]),t._v(" followers (追隨者) ")]),r("div",{staticClass:"card-body"},t._l(t.followers,(function(s){return r("router-link",{key:s.id,attrs:{to:{name:"user",params:{id:s.id}},"data-username":s.name}},[r("img",{staticClass:"avatar w-100",attrs:{src:t._f("emptyAvatarFilter")(s.image,s.id)}})])})),1)])},w=[],y={mixins:[o.XR],props:{followers:{type:Array,required:!0}}},b=y,F=(0,c.Z)(b,h,w,!1,null,"5ef13d67",null),R=F.exports,U=function(){var t=this,s=t.$createElement,r=t._self._c||s;return r("div",{staticClass:"card"},[r("div",{staticClass:"card-header"},[r("strong",[t._v(t._s(t.comments.length))]),t._v(" 已評論餐廳 ")]),r("div",{staticClass:"card-body"},t._l(t.comments,(function(s){return r("router-link",{key:s.id,attrs:{to:{name:"restaurant",params:{id:s.Restaurant.id}},"data-name":s.Restaurant.name}},[r("img",{staticClass:"avatar w-100",attrs:{src:t._f("emptyImageFilter")(s.Restaurant.image)}})])})),1)])},k=[],x={mixins:[o.Lf],props:{comments:{type:Array,required:!0}}},L=x,Z=(0,c.Z)(L,U,k,!1,null,"6b1cb869",null),$=Z.exports,A=function(){var t=this,s=t.$createElement,r=t._self._c||s;return r("div",{staticClass:"card"},[r("div",{staticClass:"card-header"},[r("strong",[t._v(t._s(t.favoritedRestaurants.length))]),t._v(" 收藏的餐廳 ")]),r("div",{staticClass:"card-body"},t._l(t.favoritedRestaurants,(function(s){return r("router-link",{key:s.id,attrs:{to:{name:"restaurant",params:{id:s.id}},"data-name":s.name}},[r("img",{staticClass:"avatar w-100",attrs:{src:t._f("emptyImageFilter")(s.image)}})])})),1)])},E=[],q={mixins:[o.Lf],props:{favoritedRestaurants:{type:Array,required:!0}}},P=q,I=(0,c.Z)(P,A,E,!1,null,"73442218",null),X=I.exports,S=r(6017),j=r(2907),O=r(1926),z={components:{UserProfileCard:f,UserFollowingsCard:C,UserFollowersCard:R,UserCommentsCard:$,UserFavoritedRestaurantsCard:X,Spinner:j.Z},data(){return{user:{profile:{},followings:[],followers:[],comments:[],favoritedRestaurants:[]},isLoading:!0}},methods:{fetchProfile:async function(t){try{this.isLoading=!0;const{data:s}=await S.Z.get({userId:t});this.user.profile={id:s.profile.id,name:s.profile.name,email:s.profile.email,image:s.profile.image,commentsLength:s.profile.Comments.length,favoritedCounts:s.profile.FavoritedRestaurants.length,followingsCounts:s.profile.Followings.length,followersCounts:s.profile.Followers.length},this.user.followings=s.profile.Followings,this.user.followers=s.profile.Followers,this.user.comments=s.profile.Comments.filter((t=>t.RestaurantId)),this.user.favoritedRestaurants=s.profile.FavoritedRestaurants,this.isLoading=!1}catch(s){this.isLoading=!1,console.log("error: ",s),O.F.fire({icon:"error",title:"無法取得使用者資料，請稍後再試"})}}},created(){this.fetchProfile(this.$route.params.id)},beforeRouteUpdate(t,s,r){this.fetchProfile(t.params.id),r()}},B=z,D=(0,c.Z)(B,e,a,!1,null,null,null),G=D.exports}}]);
//# sourceMappingURL=742.1a98bcaf.js.map