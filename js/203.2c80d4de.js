"use strict";(self["webpackChunkforum_front_end_vue"]=self["webpackChunkforum_front_end_vue"]||[]).push([[203],{4203:function(t,a,s){s.r(a),s.d(a,{default:function(){return p}});var r=function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",{staticClass:"container py-5"},[s("NavTabs"),s("h1",{staticClass:"mt-5"},[t._v("人氣餐廳")]),s("hr"),t.isLoading?s("Spinner"):s("div",{staticClass:"card-wrapper"},t._l(t.restaurants,(function(a){return s("div",{key:a.id,staticClass:"card"},[s("div",{staticClass:"row gy-1 align-items-center"},[s("div",{staticClass:"col-sm-4 col-lg-3 col-xl-4"},[s("router-link",{attrs:{to:{name:"restaurant",params:{id:a.id}}}},[s("img",{staticClass:"card-img",attrs:{src:t._f("emptyImageFilter")(a.image)}})])],1),s("div",{staticClass:"col-sm-8 col-lg-9 col-xl-8"},[s("div",{staticClass:"card-body"},[s("h5",{staticClass:"card-title"},[t._v(t._s(a.name))]),s("span",{staticClass:"badge badge-secondary"},[t._v("收藏數："+t._s(a.FavoriteCount))]),s("p",{staticClass:"card-text text-truncate"},[t._v(" "+t._s(a.description)+" ")]),s("router-link",{staticClass:"btn btn-primary mr-2",attrs:{to:{name:"restaurant-dashboard",params:{id:a.id}}}},[t._v("Dashboard ")]),a.isFavorited?s("button",{staticClass:"btn btn-danger mr-2",attrs:{type:"button",disabled:a.isProcessing},on:{click:function(s){return s.stopPropagation(),s.preventDefault(),t.deleteFavorite(a)}}},[t._v(" 移除最愛 ")]):s("button",{staticClass:"btn btn-primary",attrs:{type:"button",disabled:a.isProcessing},on:{click:function(s){return s.stopPropagation(),s.preventDefault(),t.addFavorite(a)}}},[t._v(" 加到最愛 ")])],1)])])])})),0)],1)},e=[],i=(s(1703),s(2522)),n=s(8247),o=s(1926),c=s(1947),d=s(6017),l=s(2907),u={mixins:[n.Lf],components:{NavTabs:i.Z,Spinner:l.Z},data(){return{restaurants:[],isLoading:!0}},methods:{fetchRestaurants:async function(){try{this.isLoading=!0;const{data:t}=await c.Z.getTopRestaurants();this.restaurants=t.restaurants.map((t=>({id:t.id,name:t.name,image:t.image,FavoriteCount:t.FavoriteCount,description:t.description,isFavorited:t.isFavorited,isProcessing:!1}))),this.isLoading=!1}catch(t){this.isLoading=!1,console.log("error: ",t),o.F.fire({icon:"error",title:"無法取得人氣餐廳，請稍後再試"})}},addFavorite:async function(t){try{t.isProcessing=!0;const{data:a}=await d.Z.addFavorite(t.id);if("success"!==a.status)throw new Error(a.message);t.isFavorited=!0,t.FavoriteCount++,t.isProcessing=!1}catch(a){t.isProcessing=!1,console.log("error: ",a),o.F.fire({icon:"error",title:"無法將餐廳加入最愛，請稍後再試"})}},deleteFavorite:async function(t){try{const{data:a}=await d.Z.deleteFavorite(t.id);if("success"!==a.status)throw new Error(a.message);t.isFavorited=!1,t.FavoriteCount--}catch(a){console.log("error: ",a),o.F.fire({icon:"error",title:"無法將餐廳移除最愛，請稍後再試"})}}},created(){this.fetchRestaurants()}},v=u,g=s(1001),m=(0,g.Z)(v,r,e,!1,null,"5df1d1b7",null),p=m.exports}}]);
//# sourceMappingURL=203.2c80d4de.js.map